(this.webpackJsonpproduction=this.webpackJsonpproduction||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),s=(a(15),a(1)),o=a.n(s),l=a(6),u=a(9),m=a(2),d=a(3),p=a(5),f=a(4),g=(a(17),a(18),function(e){var t=e.geturl,a=(e.getState,e.onDetect),n=e.pasteClipboard;return r.a.createElement("div",{className:"search"},r.a.createElement("input",{id:"search-input",type:"text",placeholder:"Enter URL",size:"60",onChange:t,onPaste:n}),r.a.createElement("button",{className:"btn",onClick:a},"Detect"))}),b=function(e){var t=e.userProfile;return r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Welcome ",r.a.createElement("span",{className:"username"},t.name),"!"),r.a.createElement("h4",null,"Provide a face to detect. Paste an image URL or take a screenshot, paste in the input below, and hit detect!"))},h=(a(19),a(20),function(e){var t=e.faceSelect,a=e.blobURL;return r.a.createElement("div",{className:"faceblobs-div"},a.map((function(e,a){var n="faceblobs-image fb".concat(a);return r.a.createElement("div",{key:a},r.a.createElement("img",{className:n,src:e,alt:"face",width:"40px",onClick:function(){return t(a)}}))})))}),v=(a(21),["native hawaiian or pacific islander","black or african american","american indian or alaska native","middle eastern or north african","asian","white","hispanic, latino, or spanish origin"]),E=function(e){var t=e.currPredictions;return r.a.createElement("div",{className:"face-predicts"},t.map((function(e,t){var a="preds preds".concat(t);return r.a.createElement("div",{key:t,className:a},r.a.createElement("div",null,r.a.createElement("p",{className:"preds-label"},"Gender:"),r.a.createElement("p",{className:"preds-output"},e.gender?"masculine":"feminine")),r.a.createElement("div",null,r.a.createElement("p",{className:"preds-label"},"Age:"),r.a.createElement("p",{className:"preds-output"},e.age)),r.a.createElement("div",null,r.a.createElement("p",{className:"preds-label"},"Cultural:"),r.a.createElement("p",{className:"preds-output"},v[e.race])))})))},y=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currPredictions,a=e.blobURL,n=e.setSendBlob,c=function(e){document.querySelectorAll(".preds").forEach((function(e){return e.classList.remove("highlight")})),document.querySelector(".preds".concat(e)).classList.add("highlight"),document.querySelectorAll(".faceblobs-image").forEach((function(e){return e.classList.remove("faceblobs-selected")})),document.querySelector(".fb".concat(e)).classList.add("faceblobs-selected"),document.querySelectorAll(".box").forEach((function(e){return e.classList.remove("box-select")})),document.querySelector(".box".concat(e)).classList.add("box-select")};return r.a.createElement("div",{className:"face hidden"},r.a.createElement("div",{className:"face-whole"},r.a.createElement("div",{className:"face-bboxes"},r.a.createElement("img",{className:"face-image",alt:"face",src:"",crossOrigin:"anonymous",onLoad:function(){var e=document.getElementById("myCanvas"),a=e.getContext("2d"),r=document.querySelector(".face-image"),c=[],i=0,s=r.naturalWidth,o=r.naturalHeight;t.forEach((function(l){var u=s*l.bleft/100,m=o*l.btop/100,d=s*(100-l.bright)/100-u,p=o*(100-l.bbot)/100-m;e.width=e.height=80,a.drawImage(r,u,m,d,p,0,0,80,80),e.toBlob((function(e){c.push(e),++i===t.length&&n(c)}),"image/jpeg",.95)}))}}),t.map((function(e,t){var a="box box".concat(t," btn"),n={top:e.btop+"%",left:e.bleft+"%",bottom:e.bbot+"%",right:e.bright+"%"};return r.a.createElement("div",{key:t,className:a,style:n,onClick:function(){return c(t)}})})))),r.a.createElement("div",{className:"face-info"},r.a.createElement("h5",null,"Face detected: ",t.length),r.a.createElement("div",{className:"face-predictions"},r.a.createElement(h,{faceSelect:c,blobURL:a}),r.a.createElement(E,{currPredictions:t}))))}}]),a}(r.a.Component),N=function(e){var t=e.onRouteChange;return r.a.createElement("div",{className:"nav hidden"},r.a.createElement("p",{className:"btn signout",onClick:function(){return t("signin")}},"Sign Out"))},S=(a(22),function(e){var t=e.onRouteChange,a=e.updateUser,n=e.server;return r.a.createElement("div",{className:"Signin"},r.a.createElement("h1",null,"Sign In"),r.a.createElement("label",{htmlFor:"signin-email"},"Email"),r.a.createElement("input",{type:"email",name:"signin-email",id:"signin-email"}),r.a.createElement("label",{htmlFor:"signin-pass"},"Password"),r.a.createElement("input",{type:"password",name:"signin-pass",id:"signin-pass"}),r.a.createElement("input",{className:"submit",type:"submit",value:"Sign In",onClick:function(){return function(e,t,a){var n=document.getElementById("signin-email").value,r=document.getElementById("signin-pass").value;fetch(a+"signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})}).then((function(e){return e.json()})).then((function(a){a.profile?(console.log(a),t(a),e("content"),document.querySelector(".nav").classList.remove("hidden")):alert(a)}))}(t,a,n)}}),r.a.createElement("input",{className:"btn-register",type:"submit",value:"Register",onClick:function(){return t("register")}}))}),k=(a(23),function(e){var t=e.onRouteChange,a=e.updateUser,n=e.server;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"back-arrow"},r.a.createElement("img",{className:"btn",src:"https://img.icons8.com/nolan/64/arrow-pointing-left.png",width:"30px",height:"30px",alt:"back",onClick:function(){return t("signin")}}),r.a.createElement("p",null,"Back")),r.a.createElement("div",{className:"content-register"},r.a.createElement("h1",null,"Register"),r.a.createElement("label",{htmlFor:"register-name"},"Name"),r.a.createElement("input",{type:"text",name:"name",id:"register-name",placeholder:"make up a name"}),r.a.createElement("label",{htmlFor:"register-email"},"Email"),r.a.createElement("input",{type:"email",name:"email-address",id:"register-email",placeholder:"make up any email"}),r.a.createElement("label",{htmlFor:"register-pass"},"Password"),r.a.createElement("input",{type:"password",name:"pass",id:"register-pass",placeholder:"make up any password"}),r.a.createElement("input",{className:"btn-register",type:"submit",value:"Register",onClick:function(){return function(e,t,a){var n=document.getElementById("register-name").value,r=document.getElementById("register-email").value,c=document.getElementById("register-pass").value;fetch(a+"register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:r,password:c})}).then((function(e){return e.json()})).then((function(a){a.profile.userid?(t(a),e("content"),document.querySelector(".nav").classList.remove("hidden")):alert(a)}))}(t,a,n)}})))}),w=(a(24),a(25),function(e){var t=e.image,a=e.onClickProfileImg,n=e.server;return r.a.createElement("div",{className:"card-div"},r.a.createElement("img",{src:n+t.imgurl,className:"card-image",alt:"people",width:"150",height:"100",onClick:function(){return a(t.imgid)}}),r.a.createElement("div",{className:"card-text"},"user_data"===t.oriurl?r.a.createElement("p",null,"user data"):r.a.createElement("a",{className:"card-link",href:t.oriurl},"src"),r.a.createElement("p",null,"[",t.face,"]")))}),C=function(e){var t=e.userImages,a=e.onClickProfileImg,n=e.server;return r.a.createElement("div",{className:"profile-div"},r.a.createElement("h3",{className:"profile-title"},"History ",r.a.createElement("span",{className:"profile-title-face"},"[face detected]")),r.a.createElement("div",{className:"profile-img"},t.map((function(e,t){return r.a.createElement(w,{key:t,image:e,onClickProfileImg:a,server:n})}))))},P={input:"",route:"signin",userImages:[],userPredictions:[],userProfile:"",currPredictions:[],blobURL:[],isNewPredict:!1,isImgClipboard:!1,blobClipboard:""},L="https://face-demographic-detection.herokuapp.com/",I=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(u.a)({},P),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=function(){var t=Object(l.a)(o.a.mark((function t(a){var n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}return(n=new FormData).append("imgBlob",e.state.blobClipboard,"clipboardImage"),n.append("userid",e.state.userProfile.userid),t.prev=4,t.next=7,fetch(L+"predictclipboard",{method:"post",body:n});case 7:return r=t.sent,t.next=10,r.json();case 10:return t.abrupt("return",t.sent);case 13:return t.prev=13,t.t0=t.catch(4),t.abrupt("return",t.t0);case 16:t.next=31;break;case 18:return e.setState({isNewPredict:!0}),t.prev=19,t.next=22,fetch(L+"predict",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({imgUrl:e.state.input,userid:e.state.userProfile.userid})});case 22:return c=t.sent,t.next=25,c.json();case 25:return t.abrupt("return",t.sent);case 28:return t.prev=28,t.t1=t.catch(19),t.abrupt("return",t.t1);case 31:case"end":return t.stop()}}),t,null,[[4,13],[19,28]])})));return function(e){return t.apply(this,arguments)}}(),a=function(){var a=Object(l.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(e.state.isImgClipboard);case 2:(n=a.sent).images?(document.querySelector(".face").classList.remove("hidden"),document.querySelector(".face-image").src=L+n.images[0].imgurl,e.setState({currPredictions:n.predictions,userImages:e.state.userImages.concat(n.images),userPredictions:e.state.userPredictions.concat(n.predictions)}),e.setState({isImgClipboard:!1})):alert(n),document.getElementById("search-input").value="";case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),n=function(t){"signin"===t&&(s(),document.querySelector(".nav").classList.add("hidden"),e.setState(P)),e.setState({route:t})},c=function(t){e.setState({userImages:t.images,userPredictions:t.predictions,userProfile:t.profile})},i=function(e){return e.map((function(e){return URL.createObjectURL(e)}))},s=function(){e.state.blobURL.forEach((function(e){return URL.revokeObjectURL(e)}))},u=this.state,m=u.currPredictions,d=u.blobURL,p=u.userImages,f=u.userProfile;return r.a.createElement("div",{className:"App"},r.a.createElement(N,{onRouteChange:n}),"signin"===this.state.route?r.a.createElement(S,{onRouteChange:n,updateUser:c,server:L}):"register"===this.state.route?r.a.createElement(k,{onRouteChange:n,updateUser:c,server:L}):r.a.createElement("div",{className:"main-content"},r.a.createElement(b,{userProfile:f}),r.a.createElement(g,{geturl:function(t){e.setState({input:t.target.value})},getState:function(){console.log(e.state)},onDetect:a,pasteClipboard:function(t){!function(e,t){var a=function(e){"function"===typeof t&&t(e)};!1===e.clipboardData&&a(void 0);var n=e.clipboardData.items;void 0===n&&a(void 0);for(var r=0;r<n.length;r++){if(-1!==n[r].type.indexOf("image"))a(n[r].getAsFile())}}(t,(function(t){s(),e.setState({isImgClipboard:!0,currPredictions:[],blobURL:[]});var a=document.querySelector(".face-image");a.removeAttribute("onLoad"),t&&(e.setState({blobClipboard:t}),document.querySelector(".face").classList.remove("hidden"),a.src=URL.createObjectURL(t))}))}}),r.a.createElement(y,{currPredictions:m,blobURL:d,setSendBlob:function(t){s(),e.setState({blobURL:i(t)}),e.state.isNewPredict&&function(t){console.log("sending blobs..");for(var a=new FormData,n=0;n<t.length;n++){var r=e.state.currPredictions[n].predid;a.append("image",t[n],r)}fetch(L+"blobs",{method:"post",body:a}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}(t)}}),r.a.createElement("canvas",{id:"myCanvas"}),r.a.createElement(C,{userImages:p,onClickProfileImg:function(t){document.querySelector(".face").classList.remove("hidden"),e.setState({isNewPredict:!1});var a=document.querySelector(".face-image"),n=e.state.userImages.filter((function(e){return e.imgid===t}));a.src=L+n[0].imgurl;var r=e.state.userPredictions.filter((function(e){return e.imgid===t}));e.setState({currPredictions:r})},server:L})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.6fb744e9.chunk.js.map